---
import Layout from "@layouts/Layout.astro";

// Get current theme from cookie
const theme = Astro.cookies.get("theme")?.value || "system";
---

<Layout title="Settings">
  <div class="flex flex-col gap-6">
    <h1 class="text-2xl font-bold">Settings</h1>

    <section class="flex flex-col gap-4">
      <h2 class="text-lg font-semibold">Theme</h2>
      <p class="text-sm text-neutral-500 dark:text-neutral-400">
        Choose how the site looks to you.
      </p>

      <form method="POST" action="/api/theme" class="flex flex-col gap-2">
        <input type="hidden" name="redirect" value="/settings" />

        <div class="flex flex-wrap items-center gap-x-3 gap-y-2 text-sm">
          <label class="flex cursor-pointer items-center gap-1.5">
            <input
              type="radio"
              name="theme"
              value="system"
              checked={theme === "system"}
              class="accent-blue-500"
            />
            <span class={theme === "system" ? "text-blue-600 dark:text-blue-400" : ""}>system</span>
          </label>

          <span class="text-neutral-300 dark:text-neutral-600">|</span>

          <label class="flex cursor-pointer items-center gap-1.5">
            <input
              type="radio"
              name="theme"
              value="light"
              checked={theme === "light"}
              class="accent-blue-500"
            />
            <span class={theme === "light" ? "text-blue-600 dark:text-blue-400" : ""}>light</span>
          </label>

          <span class="text-neutral-300 dark:text-neutral-600">|</span>

          <label class="flex cursor-pointer items-center gap-1.5">
            <input
              type="radio"
              name="theme"
              value="dark"
              checked={theme === "dark"}
              class="accent-blue-500"
            />
            <span class={theme === "dark" ? "text-blue-600 dark:text-blue-400" : ""}>dark</span>
          </label>

          <span class="text-neutral-300 dark:text-neutral-600">|</span>

          <button
            type="submit"
            class="text-blue-600 hover:underline dark:text-blue-400"
          >
            save
          </button>
        </div>
      </form>
    </section>
  </div>
</Layout>
